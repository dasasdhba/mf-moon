[gd_scene load_steps=51 format=3 uid="uid://y2i7o7naha3f"]

[ext_resource type="Script" path="res://moon/Godot/Platformer2D/CharaPlatformer2D.cs" id="1_q14k0"]
[ext_resource type="SpriteFrames" uid="uid://c23quybvb4ic" path="res://asset/sprite/player/mario/mario_small.aseprite" id="2_nc2t5"]
[ext_resource type="Script" path="res://dev/Level/Player/Anim/PlayerAnim.cs" id="2_xjjnt"]
[ext_resource type="AudioStream" uid="uid://cqqdxadpnvbj3" path="res://asset/audio/sound/player/jump.wav" id="5_1v03a"]
[ext_resource type="SpriteFrames" uid="uid://jfumu32dq5f" path="res://asset/sprite/player/mario/mario_super.aseprite" id="5_k34yg"]
[ext_resource type="AudioStream" uid="uid://27e4e5yuxyfd" path="res://asset/audio/sound/player/fireball.wav" id="5_mfrig"]
[ext_resource type="Script" path="res://dev/Level/Player/PlayerRef.cs" id="5_phm8n"]
[ext_resource type="AudioStream" uid="uid://dwtc2o2kwbxby" path="res://asset/audio/sound/player/swim.wav" id="6_bu04n"]
[ext_resource type="AudioStream" uid="uid://b1evp7jstbh4w" path="res://asset/audio/sound/player/stomp.wav" id="6_laxqb"]
[ext_resource type="AudioStream" uid="uid://v7htboqrx7kv" path="res://asset/audio/sound/player/power_up.wav" id="6_qv6nd"]
[ext_resource type="Script" path="res://moon/Godot/Input/InputReal.cs" id="6_vrn4i"]
[ext_resource type="SpriteFrames" uid="uid://bx0oiqk8jtnxx" path="res://asset/sprite/player/mario/mario_fire.aseprite" id="6_y03an"]
[ext_resource type="AudioStream" uid="uid://dck2vmwfy4q8v" path="res://asset/audio/sound/player/power_down.wav" id="7_5k57b"]
[ext_resource type="Script" path="res://dev/Level/Player/Movement/PlayerWalk.cs" id="7_v7v88"]
[ext_resource type="Script" path="res://dev/Level/Player/Movement/PlayerJump.cs" id="8_7e70i"]
[ext_resource type="AudioStream" uid="uid://be1061vatubwb" path="res://asset/audio/sound/player/starman_running_out.wav" id="8_54fja"]
[ext_resource type="Script" path="res://dev/Level/Player/PlayerInfo.cs" id="9_kbkit"]
[ext_resource type="Script" path="res://dev/Level/Player/Interact/PlayerStomp.cs" id="11_4qdb6"]
[ext_resource type="Script" path="res://dev/Level/Player/Movement/PlayerShape.cs" id="13_v4kbb"]
[ext_resource type="Script" path="res://dev/Level/Player/Attack/PlayerProjectile.cs" id="13_y4eu6"]
[ext_resource type="PackedScene" uid="uid://bna8f8bh6ur2o" path="res://asset/node/player/fireball_player.tscn" id="14_88ot6"]
[ext_resource type="Script" path="res://dev/Level/Player/Interact/PlayerStar.cs" id="14_kdt0w"]
[ext_resource type="PackedScene" uid="uid://dogxnrfwpe0u8" path="res://asset/node/ui/effect/score_effect.tscn" id="16_6g5sn"]
[ext_resource type="AudioStream" uid="uid://clgeos1e5evrk" path="res://asset/audio/sound/effect/combo_1.wav" id="16_bffca"]
[ext_resource type="Script" path="res://dev/Level/Player/Interact/PlayerHurt.cs" id="16_fgwku"]
[ext_resource type="Script" path="res://dev/Level/Player/Interact/PlayerGetItem.cs" id="16_g1wcc"]
[ext_resource type="AudioStream" uid="uid://dxlmi47o7kv4i" path="res://asset/audio/sound/effect/combo_2.wav" id="17_0rthn"]
[ext_resource type="PackedScene" uid="uid://dgw7shqbyrj2q" path="res://asset/node/ui/effect/life_effect.tscn" id="17_sttx1"]
[ext_resource type="AudioStream" uid="uid://cm01l45hj8wo8" path="res://asset/audio/sound/effect/combo_3.wav" id="18_5qoa2"]
[ext_resource type="AudioStream" uid="uid://if35nnpjxyi0" path="res://asset/audio/sound/effect/combo_4.wav" id="19_n1p85"]
[ext_resource type="AudioStream" uid="uid://c63825usapo3o" path="res://asset/audio/sound/effect/combo_5.wav" id="20_8lmhm"]
[ext_resource type="Shape2D" uid="uid://43dgn3t71yte" path="res://asset/shape/player_small.tres" id="20_jltqm"]
[ext_resource type="AudioStream" uid="uid://dd5fqfy4565l" path="res://asset/audio/sound/effect/combo_6.wav" id="21_dwaon"]
[ext_resource type="Shape2D" uid="uid://dt50e00cf3j5x" path="res://asset/shape/player_super.tres" id="21_glsic"]
[ext_resource type="SpriteFrames" uid="uid://bgjpetcerduoj" path="res://asset/sprite/player/mario/mario_transform.aseprite" id="21_q4t6o"]
[ext_resource type="Script" path="res://moon/Component/MarkerFlipSync.cs" id="21_sxdg3"]
[ext_resource type="Script" path="res://dev/Level/Player/Anim/PlayerTransform.cs" id="22_ajnrh"]
[ext_resource type="AudioStream" uid="uid://b741a60tfmvyi" path="res://asset/audio/sound/effect/combo_7.wav" id="22_p41do"]
[ext_resource type="Material" uid="uid://bf7ck1w6bycuk" path="res://asset/material/super_sai.tres" id="23_kubls"]
[ext_resource type="Script" path="res://dev/Level/Player/Interact/PlayerHitBlock.cs" id="30_5lctw"]
[ext_resource type="PackedScene" uid="uid://dvyx0j0c2ihh4" path="res://asset/node/player/beet_player.tscn" id="31_hlgjw"]
[ext_resource type="SpriteFrames" uid="uid://ctg7xkkmwnpis" path="res://asset/sprite/player/mario/mario_beet.aseprite" id="38_m37ye"]
[ext_resource type="Script" path="res://dev/Level/Player/Anim/PlayerStarParticles.cs" id="38_w8hr0"]
[ext_resource type="Texture2D" uid="uid://6bam5mr2m7g5" path="res://asset/sprite/particle/star_blue.png" id="39_evgga"]
[ext_resource type="AudioStream" uid="uid://cp2ngnvvygsvp" path="res://asset/audio/sound/player/starman.ogg" id="39_xxr87"]
[ext_resource type="Texture2D" uid="uid://b7cvyevhfrg4x" path="res://asset/sprite/particle/star_green.png" id="40_4l1jw"]
[ext_resource type="Texture2D" uid="uid://cacjfwr808qfy" path="res://asset/sprite/particle/star_indigo.png" id="41_lklaq"]
[ext_resource type="Texture2D" uid="uid://i5nwk533kexm" path="res://asset/sprite/particle/star_purple.png" id="42_1p77w"]
[ext_resource type="Texture2D" uid="uid://bvrlic515exp3" path="res://asset/sprite/particle/star_red.png" id="43_3idic"]
[ext_resource type="Texture2D" uid="uid://dt7r517vjl1f" path="res://asset/sprite/particle/star_yellow.png" id="44_gxkcc"]

[node name="PlayerBase" type="CharacterBody2D"]
z_index = 5
collision_mask = 3221225472
floor_max_angle = 1.0472
floor_snap_length = 4.0
script = ExtResource("1_q14k0")
GravityAccSpeed = 2500.0
GravityDecSpeed = 2500.0

[node name="Sound" type="Node" parent="."]

[node name="Jump" type="AudioStreamPlayer" parent="Sound"]
stream = ExtResource("5_1v03a")

[node name="Stomp" type="AudioStreamPlayer" parent="Sound"]
stream = ExtResource("6_laxqb")

[node name="Swim" type="AudioStreamPlayer" parent="Sound"]
stream = ExtResource("6_bu04n")

[node name="Fireball" type="AudioStreamPlayer" parent="Sound"]
stream = ExtResource("5_mfrig")

[node name="PowerUp" type="AudioStreamPlayer" parent="Sound"]
stream = ExtResource("6_qv6nd")

[node name="PowerDown" type="AudioStreamPlayer" parent="Sound"]
stream = ExtResource("7_5k57b")

[node name="StarRunningOut" type="AudioStreamPlayer" parent="Sound"]
stream = ExtResource("8_54fja")

[node name="Info" type="Node" parent="."]
script = ExtResource("9_kbkit")

[node name="Ref" type="Node" parent="." node_paths=PackedStringArray("Body", "Input", "Walk", "Jump", "Anim", "Shape", "Hurt", "Star")]
script = ExtResource("5_phm8n")
Body = NodePath("..")
Input = NodePath("../InputReal")
Walk = NodePath("../Walk")
Jump = NodePath("../Jump")
Anim = NodePath("../Anim")
Shape = NodePath("../Shape")
Hurt = NodePath("../Hurt")
Star = NodePath("../Star")

[node name="InputReal" type="Node" parent="."]
script = ExtResource("6_vrn4i")

[node name="Walk" type="Node" parent="." node_paths=PackedStringArray("Ref")]
script = ExtResource("7_v7v88")
Ref = NodePath("../Ref")

[node name="Jump" type="Node" parent="." node_paths=PackedStringArray("Ref")]
script = ExtResource("8_7e70i")
Ref = NodePath("../Ref")

[node name="Shape" type="Node" parent="." node_paths=PackedStringArray("Ref", "SmallShape", "SuperShape")]
script = ExtResource("13_v4kbb")
Ref = NodePath("../Ref")
SmallShape = NodePath("../CollisionShapeSmall")
SuperShape = NodePath("../CollisionShapeSuper")

[node name="ItemGet" type="Node" parent="." node_paths=PackedStringArray("Ref")]
script = ExtResource("16_g1wcc")
Ref = NodePath("../Ref")

[node name="Star" type="Node" parent="." node_paths=PackedStringArray("Ref", "Body")]
script = ExtResource("14_kdt0w")
Ref = NodePath("../Ref")
ScoreScene = ExtResource("16_6g5sn")
LifeScene = ExtResource("17_sttx1")
Body = NodePath("..")
Type = 5

[node name="Combo1" type="AudioStreamPlayer" parent="Star"]
stream = ExtResource("16_bffca")

[node name="Combo2" type="AudioStreamPlayer" parent="Star"]
stream = ExtResource("17_0rthn")

[node name="Combo3" type="AudioStreamPlayer" parent="Star"]
stream = ExtResource("18_5qoa2")

[node name="Combo4" type="AudioStreamPlayer" parent="Star"]
stream = ExtResource("19_n1p85")

[node name="Combo5" type="AudioStreamPlayer" parent="Star"]
stream = ExtResource("20_8lmhm")

[node name="Combo6" type="AudioStreamPlayer" parent="Star"]
stream = ExtResource("21_dwaon")

[node name="Combo7" type="AudioStreamPlayer" parent="Star"]
stream = ExtResource("22_p41do")

[node name="Stomp" type="Node" parent="." node_paths=PackedStringArray("Ref")]
script = ExtResource("11_4qdb6")
Ref = NodePath("../Ref")

[node name="HitBlock" type="Node" parent="." node_paths=PackedStringArray("Ref", "Body")]
script = ExtResource("30_5lctw")
Ref = NodePath("../Ref")
EnableFall = false
EnableMove = false
Body = NodePath("..")

[node name="Hurt" type="Node" parent="." node_paths=PackedStringArray("Ref")]
script = ExtResource("16_fgwku")
Ref = NodePath("../Ref")

[node name="Attack" type="Node" parent="."]

[node name="Fireball" type="Node" parent="Attack" node_paths=PackedStringArray("GeneratePoint", "Ref")]
script = ExtResource("13_y4eu6")
ProjectileScene = ExtResource("14_88ot6")
GeneratePoint = NodePath("../../FirePoint")
State = 2
Ref = NodePath("../../Ref")

[node name="Beet" type="Node" parent="Attack" node_paths=PackedStringArray("GeneratePoint", "Ref")]
script = ExtResource("13_y4eu6")
ProjectileScene = ExtResource("31_hlgjw")
GeneratePoint = NodePath("../../BeetPoint")
State = 3
Ref = NodePath("../../Ref")

[node name="Anim" type="Node2D" parent="." node_paths=PackedStringArray("Ref")]
script = ExtResource("2_xjjnt")
Ref = NodePath("../Ref")
Autoplay = "Idle"

[node name="Small" type="AnimatedSprite2D" parent="Anim"]
material = ExtResource("23_kubls")
position = Vector2(0, -1)
sprite_frames = ExtResource("2_nc2t5")
animation = &"Idle"

[node name="Super" type="AnimatedSprite2D" parent="Anim"]
material = ExtResource("23_kubls")
position = Vector2(0, -17)
sprite_frames = ExtResource("5_k34yg")
animation = &"Idle"

[node name="Fire" type="AnimatedSprite2D" parent="Anim"]
material = ExtResource("23_kubls")
position = Vector2(0, -17)
sprite_frames = ExtResource("6_y03an")
animation = &"Idle"

[node name="Beet" type="AnimatedSprite2D" parent="Anim"]
material = ExtResource("23_kubls")
position = Vector2(0, -17)
sprite_frames = ExtResource("38_m37ye")
animation = &"Idle"

[node name="Transform" type="AnimatedSprite2D" parent="." node_paths=PackedStringArray("Ref")]
visible = false
position = Vector2(0, -18)
sprite_frames = ExtResource("21_q4t6o")
animation = &"Small"
script = ExtResource("22_ajnrh")
Ref = NodePath("../Ref")

[node name="StarParticles" type="Node2D" parent="." node_paths=PackedStringArray("Ref")]
script = ExtResource("38_w8hr0")
StarMusic = ExtResource("39_xxr87")
Ref = NodePath("../Ref")
Textures = [ExtResource("39_evgga"), ExtResource("40_4l1jw"), ExtResource("41_lklaq"), ExtResource("42_1p77w"), ExtResource("43_3idic"), ExtResource("44_gxkcc")]
AlphaFromMin = 0.6
AlphaFromMax = 0.8
ScaleFromMin = 0.8
ScaleSpeed = 3.0
RotationMax = 360.0
Interval = 0.03
MaxDrawingTask = 20
ProcessCallback = 1

[node name="FirePoint" type="Marker2D" parent="." node_paths=PackedStringArray("AnimNode")]
position = Vector2(0, -14)
script = ExtResource("21_sxdg3")
AnimNode = NodePath("../Anim")

[node name="BeetPoint" type="Marker2D" parent="." node_paths=PackedStringArray("AnimNode")]
position = Vector2(0, -30)
script = ExtResource("21_sxdg3")
AnimNode = NodePath("../Anim")

[node name="CollisionShapeSmall" type="CollisionShape2D" parent="."]
shape = ExtResource("20_jltqm")

[node name="CollisionShapeSuper" type="CollisionShape2D" parent="."]
position = Vector2(0, -13)
shape = ExtResource("21_glsic")
disabled = true

[connection signal="Jumped" from="Jump" to="Sound/Jump" method="play"]
[connection signal="JumpedOutWater" from="Jump" to="Sound/Swim" method="play"]
[connection signal="Swum" from="Jump" to="Sound/Swim" method="play"]
[connection signal="RunningOut" from="Star" to="Sound/StarRunningOut" method="play"]
[connection signal="Stomped" from="Stomp" to="Sound/Stomp" method="play"]
[connection signal="Fired" from="Attack/Fireball" to="Sound/Fireball" method="play" unbinds=1]
[connection signal="Fired" from="Attack/Beet" to="Sound/Fireball" method="play" unbinds=1]
[connection signal="PowerDown" from="Transform" to="Sound/PowerDown" method="play"]
[connection signal="PowerUp" from="Transform" to="Sound/PowerUp" method="play"]
